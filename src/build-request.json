{
  "kind": "build_request",
  "title": "Fix Internet Identity sign-up route, per-user account isolation, goals deletion, and data-aware AI assistant",
  "projectName": "FinanceWise AI",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the broken Sign Up navigation so clicking “Sign Up Free” does not go to a Not Found route and instead takes the user to a working Internet Identity authentication screen.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "ok but in computer showing sign up system when I clicked it's showing not found so resolve it"
        ]
      },
      "acceptanceCriteria": [
        "From the public header (desktop and mobile), clicking “Sign Up Free” navigates to an existing route (no Not Found).",
        "The destination page provides a working Internet Identity sign-in/sign-up experience (same II flow is acceptable).",
        "After successful Internet Identity authentication, the user is redirected to /dashboard."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Resolve account isolation so different Internet Identity users (different principals) always see different profiles, goals, transactions, and dashboard data; switching identities must not show the previous user’s data.",
      "target": "both",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "Every login and sign up email id should be different different account whenever I login different different eMail id it's showing same account  check and resolve"
        ]
      },
      "acceptanceCriteria": [
        "Logging in with Internet Identity A and creating any data (profile/goals/transactions) does not appear when logging out and logging in with Internet Identity B.",
        "After switching identities, the UI does not briefly display the previous user’s cached data; React Query caches are reset/segmented so queries refetch for the new identity.",
        "Backend read/write operations for user data are keyed by the authenticated caller principal (not a shared/global record)."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Fix the Goals page delete flow so goals are actually removed from storage and the UI, and replace the browser confirm() with an in-app confirmation popup shown only for goal deletion.",
      "target": "both",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "in goals page added goals are not deleting resolve",
          "confirmation popup",
          "only goals"
        ]
      },
      "acceptanceCriteria": [
        "Clicking the delete icon on a goal opens an in-app confirmation dialog (not window.confirm).",
        "Confirming deletion removes the goal from backend storage and it disappears from the goals list without requiring a manual refresh.",
        "Canceling the dialog does not delete the goal.",
        "Only goal deletion uses this confirmation dialog (no new confirmations are introduced for other deletes)."
      ]
    },
    {
      "id": "REQ-4",
      "text": "Ensure cross-page data consistency: when the user adds/updates/deletes transactions or goals, all relevant pages (Dashboard, Transactions, Goals, Analytics, and the AI assistant context) reflect the changes correctly via shared queries and proper invalidation/refetch.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "every page should be connected with each other and connect also with ai assistant"
        ]
      },
      "acceptanceCriteria": [
        "After adding or deleting a transaction, Dashboard aggregates and any other pages that use transaction data update to reflect the change.",
        "After adding/updating/deleting a goal, any goal summaries/goal-related widgets across the app update to reflect the change.",
        "No page requires a full reload to see data created on another page after the mutation completes."
      ]
    },
    {
      "id": "REQ-5",
      "text": "Upgrade the AI assistant so its answers are based on the authenticated user’s actual app data (at minimum: transactions, balance, and savings goals) and it can answer saving, investing, and expense-control questions using those numbers from the dashboard.",
      "target": "both",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "ai assistant need to answer for saving invest Expense how to control save etc through the data of pages which in dashboard",
          "yes update the ai assistant and connect all pages with each other"
        ]
      },
      "acceptanceCriteria": [
        "When the user asks about saving/expense control/investing, the assistant response references the user’s real data (e.g., current balance, recent spending totals, goal targets/progress) when available, rather than generic advice.",
        "The assistant continues to include an educational/not-financial-advice disclaimer in responses.",
        "If the user has no transactions/goals yet, the assistant responds with a data-aware fallback (e.g., asks them to add data and provides general next steps)."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in backend/main.mo (no additional backend services).",
    "Do not edit files under frontend/src/components/ui or other immutable paths listed in SYSTEM_CONTEXT.",
    "Do not implement email/password authentication; use Internet Identity only for authentication and account identity."
  ],
  "nonGoals": [
    "Adding third-party authentication providers (Google/Facebook/GitHub/Auth0).",
    "Adding real LLM integrations (OpenAI/Anthropic/etc.) or external AI APIs.",
    "Implementing new unrelated product features outside auth/sign-up routing, goals deletion, data consistency, and AI assistant improvements."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}