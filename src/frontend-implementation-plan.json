{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Build-time versioning + Deployment Info UI for verified rebuild of version 242",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add a build-time configurable frontend version identifier and surface it in always-visible UI for both public and authenticated areas.",
      "acceptanceCriteria": [
        "A build-time version string can be configured without code changes (e.g., via a frontend env/build constant).",
        "The app displays the configured version string in at least one always-visible location (e.g., footer) in both public and authenticated areas.",
        "The displayed version string exactly matches the configured build version (e.g., \"242\") after rebuild."
      ],
      "file_operations": [
        {
          "path": "frontend/.env.example",
          "operation": "create",
          "description": "Document build-time configuration for the frontend build version via a Vite env variable (e.g., VITE_APP_VERSION=242) and any optional build metadata env vars used by the UI (e.g., VITE_BUILD_TIMESTAMP, VITE_GIT_SHA)."
        },
        {
          "path": "frontend/vercel.json",
          "operation": "modify",
          "description": "Add/ensure a build-time environment variable entry for the frontend build version (VITE_APP_VERSION) so operators can set it per deployment without code changes."
        },
        {
          "path": "frontend/src/lib/buildInfo.ts",
          "operation": "create",
          "description": "Add a small helper module that exposes a single source of truth for the configured frontend build version (from import.meta.env.VITE_APP_VERSION) and optional locally-available build metadata (mode/prod flags and optional timestamp/SHA env vars)."
        },
        {
          "path": "frontend/src/components/BuildVersionBadge.tsx",
          "operation": "create",
          "description": "Create a reusable UI snippet that reads the frontend version from the buildInfo helper and renders it in a compact, always-visible format. Use shadcn-ui primitives (e.g., badge/card/typography) by composing existing components only; verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/Footer.tsx",
          "operation": "modify",
          "description": "Render the BuildVersionBadge in the public footer bottom bar so the frontend version is always visible on public pages. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/AppLayout.tsx",
          "operation": "modify",
          "description": "Render the BuildVersionBadge in an always-visible location within the authenticated layout (e.g., sidebar bottom section and/or mobile header area) so authenticated users can also verify the frontend version. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Implement the Deployment Info page to display frontend build/version and other locally-available build metadata, and make it reachable via routing/navigation.",
      "acceptanceCriteria": [
        "The previously empty `frontend/src/pages/DeploymentInfo.tsx` renders a page with a clear title and a version field.",
        "A route exists that allows navigating to the Deployment Info page in the running app (public or authenticated is acceptable, but it must be reachable without editing immutable paths).",
        "The version shown on the Deployment Info page matches the version shown in the always-visible location from REQ-1."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useBackendVersion.ts",
          "operation": "create",
          "description": "Add a small React Query hook that uses useActor() to fetch the backend version via the existing actor method getBackendVersion(), returning loading/error states for the Deployment Info UI."
        },
        {
          "path": "frontend/src/pages/DeploymentInfo.tsx",
          "operation": "modify",
          "description": "Implement the Deployment Info page UI with a clear English title and fields for frontend version (from buildInfo) plus backend version (from useBackendVersion), along with any optional locally-available build metadata (e.g., build timestamp/SHA if present). Use shadcn-ui components by composing existing UI components only; verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Wire the Deployment Info page into the router by adding a reachable route (e.g., /deployment-info) and include it in the route tree so it can be navigated to in the running app."
        },
        {
          "path": "frontend/src/components/Footer.tsx",
          "operation": "modify",
          "description": "Add a navigation link/button to the Deployment Info route so the page is reachable from the public UI without needing to know the URL. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Add an informational deployment safety warning on the Deployment Info page when the configured frontend build version is not the requested target version 242.",
      "acceptanceCriteria": [
        "When the configured build version is anything other than \"242\", the app shows a clear warning message on the Deployment Info page (English text).",
        "When the configured build version is \"242\", no warning is shown.",
        "The warning does not block normal app usage; it is informational only."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/DeploymentInfo.tsx",
          "operation": "modify",
          "description": "Add an English, informational-only warning block that appears when the configured frontend version (from buildInfo) !== \"242\". Also add a clear visual comparison between frontend and backend versions (e.g., show both values and a mismatch indicator) without blocking usage. Use shadcn-ui components by composing existing UI components only; verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/lib/buildInfo.ts",
          "operation": "modify",
          "description": "Add a single exported constant for the target review version (\"242\") or a helper comparison function used by the Deployment Info page so the safety check logic stays centralized and consistent."
        }
      ]
    }
  ]
}