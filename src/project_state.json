{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Full-stack finance tracking application with backend-first architecture, Internet Identity authentication, and complete data persistence across all private pages (Dashboard, Transactions, Goals, Analytics, Budget, Planner, Calculators, AI Insights, Quiz). Each user's data is isolated by Principal and persists through logout, refresh, and across devices.",
  "architectural_notes": [
    "Backend uses Motoko with HashMap storing Principal â†’ UserData",
    "All CRUD operations must save immediately to backend",
    "Never store important data only in frontend state",
    "Each user's data completely isolated by their Principal",
    "Login flow: fetch user data from backend on authentication",
    "Logout flow: clear frontend state but preserve backend data",
    "All private pages fetch data from backend on every load",
    "Data persistence must work across refresh, logout/login, and different devices"
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-implement-internet-identity-authentication-system-that-manages-login-logout-flow-and-persists-authentication-state-across-browser-sessions",
      "title": "Implement Internet Identity authentication system that manages login/logout flow and persists authentication state across browser sessions",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-dashboard-page-to-fetch-all-data-from-backend-on-mount-and-after-any-mutation-never-relying-on-frontend-only-state-for-persistence",
      "title": "Modify Dashboard page to fetch all data from backend on mount and after any mutation, never relying on frontend-only state for persistence",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-transactions-page-to-fetch-transaction-history-from-backend-and-implement-add-edit-delete-operations-that-save-immediately-to-backend",
      "title": "Modify Transactions page to fetch transaction history from backend and implement add/edit/delete operations that save immediately to backend",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-goals-page-to-fetch-savings-goals-from-backend-and-implement-crud-operations-with-immediate-backend-persistence",
      "title": "Modify Goals page to fetch savings goals from backend and implement CRUD operations with immediate backend persistence",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-analytics-page-to-fetch-transaction-data-and-user-preferences-from-backend-ensuring-all-analytics-calculations-are-based-on-backend-data",
      "title": "Modify Analytics page to fetch transaction data and user preferences from backend, ensuring all analytics calculations are based on backend data",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-budget-planner-page-to-save-budget-plans-to-backend-and-fetch-them-on-page-load",
      "title": "Modify Budget Planner page to save budget plans to backend and fetch them on page load",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-calculators-page-to-save-calculation-history-to-backend-and-fetch-previous-calculations-on-page-load",
      "title": "Modify Calculators page to save calculation history to backend and fetch previous calculations on page load",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-ai-insights-page-to-fetch-ai-predictions-from-backend-and-ensure-prediction-generation-saves-results-to-backend",
      "title": "Modify AI Insights page to fetch AI predictions from backend and ensure prediction generation saves results to backend",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-quiz-learning-pages-to-save-quiz-progress-and-scores-to-backend-keyed-by-user-principal",
      "title": "Modify Quiz/Learning pages to save quiz progress and scores to backend keyed by user Principal",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-settings-page-backend-integration-to-save-user-preferences-theme-notifications-analytics-visibility-currency-to-backend-and-fetch-on-page-load",
      "title": "Implement Settings page backend integration to save user preferences (theme, notifications, analytics visibility, currency) to backend and fetch on page load",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-react-query-hooks-to-invalidate-and-refetch-data-after-mutations-ensuring-frontend-always-displays-current-backend-state",
      "title": "Update all React Query hooks to invalidate and refetch data after mutations, ensuring frontend always displays current backend state",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-comprehensive-data-persistence-testing-across-all-private-pages-to-verify-data-survives-browser-refresh-logout-login-cycles-and-cross-device-access",
      "title": "Implement comprehensive data persistence testing across all private pages to verify data survives browser refresh, logout/login cycles, and cross-device access",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-update-applayout-logout-handler-to-clear-all-frontend-state-and-query-cache-while-preserving-backend-data",
      "title": "Update AppLayout logout handler to clear all frontend state and query cache while preserving backend data",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Backend-first data storage with Principal-based user isolation",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-2",
      "summary": "Internet Identity authentication system",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-3",
      "summary": "Private pages: Dashboard, Transactions, Goals, Analytics, Budget, Planner, Calculators, AI Insights, Quiz",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-4",
      "summary": "Complete data persistence across logout, refresh, and devices",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-6",
      "summary": "Create backend data structure using HashMap to store user data keyed by Principal, with each user having isolated storage for transactions, goals, budgets, preferences, predictions, and quiz progress",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Implement backend API endpoints for all CRUD operations on user data (transactions, goals, budgets, preferences, predictions, quiz progress) that save immediately to the HashMap and return updated data",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    }
  ],
  "projectName": "FinanceWise AI",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}